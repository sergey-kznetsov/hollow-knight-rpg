<form class="hkrpg sheet" autocomplete="off">
  <header class="sheet-header">
    <div class="hkrpg-row">
      <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="80" width="80"/>
      <div style="flex:1; margin-left:10px;">
        <h2 style="margin:0;">
          <input name="name" type="text" value="{{actor.name}}" />
        </h2>
        <div class="hkrpg-actions" style="margin-top:6px;">
          <button type="button" data-action="roll-init"><i class="fas fa-bolt"></i> {{localize "HKRPG.Chat.Initiative"}}</button>
        </div>
      </div>
      <span class="hkrpg-pill">{{localize "HKRPG.Actor.Types.creature"}}</span>
    </div>
  </header>

  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="stats">{{localize "HKRPG.Sheet.Tabs.characteristics"}}</a>
    <a class="item" data-tab="actions">{{localize "HKRPG.Sheet.Sections.equipment"}}</a>
    <a class="item" data-tab="bio">{{localize "HKRPG.Sheet.Tabs.biography"}}</a>
  </nav>

  <section class="sheet-body">
    <div class="tab" data-group="primary" data-tab="stats">
      <div class="hkrpg-grid hkrpg-cols-2">
        <div class="hkrpg-card">
          <h3>{{localize "HKRPG.Sheet.Tabs.characteristics"}}</h3>
          <div class="hkrpg-row"><label>{{localize "HKRPG.Actor.Characteristics.might"}}</label>
            <input type="number" name="system.characteristics.might.value" value="{{system.characteristics.might.value}}"/></div>
          <div class="hkrpg-row"><label>{{localize "HKRPG.Actor.Characteristics.grace"}}</label>
            <input type="number" name="system.characteristics.grace.value" value="{{system.characteristics.grace.value}}"/></div>
          <div class="hkrpg-row"><label>{{localize "HKRPG.Actor.Characteristics.shell"}}</label>
            <input type="number" name="system.characteristics.shell.value" value="{{system.characteristics.shell.value}}"/></div>
        </div>

        <div class="hkrpg-card">
          <h3>{{localize "HKRPG.Actor.Pools.hearts"}} / {{localize "HKRPG.Actor.Pools.stamina"}}</h3>
          <div class="hkrpg-row">
            <label>{{localize "HKRPG.Actor.Pools.hearts"}}</label>
            <input type="number" name="system.pools.hearts.value" value="{{system.pools.hearts.value}}"/>
            <span>/</span>
            <input type="number" name="system.pools.hearts.max" value="{{system.pools.hearts.max}}"/>
          </div>
          <div class="hkrpg-row">
            <label>{{localize "HKRPG.Actor.Pools.stamina"}}</label>
            <input type="number" name="system.pools.stamina.value" value="{{system.pools.stamina.value}}"/>
            <span>/</span>
            <input type="number" name="system.pools.stamina.max" value="{{system.pools.stamina.max}}"/>
          </div>

          <div class="hkrpg-row"><label>{{localize "HKRPG.Actor.Secondary.speed"}}</label>
            <input type="number" name="system.secondary.speed.value" value="{{system.secondary.speed.value}}"/></div>
          <div class="hkrpg-row"><label>{{localize "HKRPG.Actor.Secondary.horror"}}</label>
            <input type="number" name="system.secondary.horror.value" value="{{system.secondary.horror.value}}"/></div>
          <div class="hkrpg-row"><label>{{localize "HKRPG.Actor.Secondary.hunger"}}</label>
            <input type="number" name="system.secondary.hunger.value" value="{{system.secondary.hunger.value}}"/></div>
        </div>
      </div>
    </div>

    <div class="tab" data-group="primary" data-tab="actions">
      <div class="hkrpg-card">
        <h3>Атаки и способности</h3>
        <div class="hkrpg-actions" style="margin-bottom:8px;">
          <button type="button" data-action="item-create" data-type="weapon"><i class="fas fa-plus"></i> {{localize "HKRPG.Item.Types.weapon"}}</button>
          <button type="button" data-action="item-create" data-type="art"><i class="fas fa-plus"></i> {{localize "HKRPG.Item.Types.art"}}</button>
          <button type="button" data-action="item-create" data-type="spell"><i class="fas fa-plus"></i> {{localize "HKRPG.Item.Types.spell"}}</button>
        </div>

        <ol class="items-list">
          {{#each items as |item|}}
          <li class="item hkrpg-row" data-item-id="{{item._id}}">
            <div style="display:flex; align-items:center; gap:8px; flex:1;">
              <img src="{{item.img}}" width="24" height="24"/>
              <b>{{item.name}}</b>
              <span style="color: var(--hk-muted);">({{localize (concat "HKRPG.Item.Types." item.type)}})</span>
            </div>
            <div class="hkrpg-actions">
              {{#if (or (eq item.type "weapon") (eq item.type "spell") (eq item.type "art"))}}
              <button type="button" class="item-roll"><i class="fas fa-dice"></i></button>
              {{/if}}
              <button type="button" class="item-edit"><i class="fas fa-edit"></i></button>
              <button type="button" class="item-delete"><i class="fas fa-trash"></i></button>
            </div>
          </li>
          {{/each}}
        </ol>
      </div>
    </div>

    <div class="tab" data-group="primary" data-tab="bio">
      <div class="hkrpg-grid hkrpg-cols-2">
        <div class="hkrpg-card">
          <h3>Цитата</h3>
          <textarea name="system.biography.quote" rows="10">{{system.biography.quote}}</textarea>
        </div>
        <div class="hkrpg-card">
          <h3>Описание / особенности</h3>
          <textarea name="system.biography.description" rows="10">{{system.biography.description}}</textarea>
        </div>
      </div>

      <div class="hkrpg-card" style="margin-top:8px;">
        <h3>Черты</h3>
        <textarea name="system.traits.notes" rows="6">{{system.traits.notes}}</textarea>
      </div>
    </div>
  </section>
</form>
